<div class="suggestions-bg">
  <div class="container py-4">
    <h2 class="mb-3 fw-bold">ğŸ’¡ Liste des Suggestions</h2>

    <!-- Barre de recherche -->
    <div class="mb-4">
      <input 
        type="text" 
        class="form-control" 
        placeholder="Rechercher par titre ou catÃ©gorie..."
        [(ngModel)]="searchTerm">
    </div>

    <!-- Section Mes favoris -->
    <div class="mb-5" *ngIf="favorites.length > 0">
      <h3 class="mb-3 fw-bold">â­ Mes Favoris</h3>
      <div class="row g-3">
        <div class="col-md-3" *ngFor="let fav of favorites">
          <div class="card suggestion-card h-100 border-warning">
            <div class="card-body d-flex flex-column">
              <div class="d-flex justify-content-between mb-2">
                <h5 class="card-title mb-0">{{ fav.title }}</h5>
                <small class="text-muted">{{ fav.date | date:'shortDate' }}</small>
              </div>
              <p class="card-text text-muted small">{{ fav.description }}</p>
              <p class="mb-1"><strong>CatÃ©gorie:</strong> {{ fav.category }}</p>
              <p class="mb-2"><strong>status:</strong> <span class="badge bg-secondary">{{ fav.statut }}</span></p>
              <div class="mt-auto d-flex justify-content-between align-items-center">
                <span class="badge bg-info">{{ fav.nbLikes }} likes</span>
                <div *ngIf="fav.statut !== 'refusee'" class="d-flex gap-2">
                  <button class="btn btn-sm btn-primary" (click)="like(fav)">ğŸ‘ Like</button>
                  <button class="btn btn-sm btn-danger" (click)="removeFromFavorites(fav)">âŒ Retirer</button>
                  <button class="btn btn-sm btn-outline-secondary" [routerLink]="['/suggestion','details', fav.id]">Details</button> <!-- ajoutÃ© -->
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Cards -->
    <div>
      <h3 class="mb-3 fw-bold">Suggestions</h3>
      <div class="row g-3">
        <div class="col-md-3" *ngFor="let s of filteredSuggestions">
          <div class="card suggestion-card h-100">
            <div class="card-body d-flex flex-column">
              <div class="d-flex justify-content-between mb-2">
                <h5 class="card-title mb-0">{{ s.title }}</h5>
                <small class="text-muted">{{ s.date | date:'shortDate' }}</small>
              </div>
              <p class="card-text text-muted small">{{ s.description }}</p>
              <p class="mb-1"><strong>CatÃ©gorie:</strong> {{ s.category }}</p>
              <p class="mb-2"><strong>status:</strong> <span class="badge bg-secondary">{{ s.statut }}</span></p>
              <div class="mt-auto d-flex justify-content-between align-items-center">
                <span class="badge bg-info">{{ s.nbLikes }} likes</span>
                <div *ngIf="s.statut !== 'refusee'" class="d-flex gap-2">
                  <button class="btn btn-sm btn-primary" (click)="like(s)">ğŸ‘ Like</button>
                  <button class="btn btn-sm btn-warning" (click)="addToFavorites(s)">â­ Ajouter aux favoris</button>
                  <button class="btn btn-sm btn-outline-secondary" [routerLink]="['/suggestion','details', s.id]">Details</button> <!-- ajoutÃ© -->
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="mt-4" *ngIf="filteredSuggestions.length === 0">
        <div class="alert alert-light text-center">Aucune suggestion disponible.</div>
      </div>
    </div>
  </div>
</div>

<!-- router-outlet pour afficher les dÃ©tails en tant qu'enfant -->
<router-outlet></router-outlet> <!-- ajoutÃ© -->